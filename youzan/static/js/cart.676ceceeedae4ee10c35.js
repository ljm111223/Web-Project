webpackJsonp([5],{0:function(e,t,o){"use strict";var i={hotList:"/index/hotLists",banner:"/index/banner",topList:"/category/topList",subList:"/category/subList",topRank:"/category/rank",search:"/search/list",details:"/goods/details",deal:"/goods/deal",addToCart:"/cart/add",cartList:"/cart/list",cartReduce:"/cart/reduce",cartRemove:"/cart/remove",cartMremove:"/cart/mrremove",addressList:"/address/list",addressAdd:"/address/add",addressRemove:"/address/remove",addressUpdate:"/address/update",addressSetDefault:"/address/setDefault"};for(var n in i)i.hasOwnProperty(n)&&(i[n]="http://rap2api.taobao.org/app/mock/7058"+i[n]);t.a=i},10:function(e,t){},107:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(70),n=(o.n(i),o(71)),s=(o.n(n),o(69)),c=(o.n(s),o(1)),r=o(8),d=o.n(r),h=o(29),a=o.n(h),u=o(7),f=o(0);new c.default({el:".container",data:{cartList:null,sum:0,checkedAll:!0,goodsNum:0,editingShop:null,editingShopIndex:-1,removeCheckedAll:!1,removeList:[],removePopup:!1,removeMsg:"你确定要删除该商品吗",removeData:null},created:function(){this.getList()},methods:{getList:function(){var e=this;d.a.post(f.a.cartList).then(function(t){var o=t.data.cartList;o.forEach(function(t){t.isEditing=!1,t.editingMsg="编辑",t.removeChecked=!1,e.chooseShop(t,!0,o),t.goodsList.forEach(function(e){e.removeChecked=!1})}),e.cartList=o})},chooseGood:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.cartList;if(this.editingShop){if(t!=this.editingShop)return;e.removeChecked!=o&&(e.removeChecked=o,this.removeList=this.getRemoveList(),console.log(this.removeList.length),e.removeChecked?t.goodsList.every(function(e){return e.removeChecked})&&(t.removeChecked=!0,this.removeCheckedAll=!0):(t.removeChecked=!1,this.removeCheckedAll=!1))}else e.checked!=o&&(e.checked=o,e.checked?(this.addGood(e),t.goodsList.every(function(e){return e.checked})&&(t.checked=!0,i.every(function(e){return e.goodsList.every(function(e){return e.checked})})&&(this.checkedAll=!0))):(t.checked=!1,this.removeGood(e),this.checkedAll=!1))},chooseShop:function(e,t){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.cartList;if(this.editingShop){if(e!=this.editingShop)return;e.removeChecked=t,e.goodsList.forEach(function(n){o.chooseGood(n,e,t,i)})}else e.checked=t,e.goodsList.forEach(function(n){o.chooseGood(n,e,t,i)})},chooseAll:function(){var e=this;this.editingShop?(this.removeCheckedAll=!this.removeCheckedAll,this.editingShop.goodsList.forEach(function(t){e.chooseGood(t,e.editingShop,e.removeCheckedAll)})):(this.checkedAll=!this.checkedAll,this.cartList.forEach(function(t){e.chooseShop(t,e.checkedAll)}))},addGood:function(e){this.sum+=e.price*e.number,this.goodsNum+=1},removeGood:function(e){this.sum-=e.price*e.number,this.goodsNum-=1},editShop:function(e,t){var o=this;e.isEditing=!e.isEditing,e.editingMsg=e.isEditing?"完成":"编辑",this.cartList.forEach(function(i,n){o.editingShop&&i.goodsList.forEach(function(e){o.chooseGood(e,i,!1)}),n!=t&&(i.isEditing=!1,i.editingMsg=e.isEditing?"":"编辑"),o.editingShop=e.isEditing?e:null,o.editingShopIndex=e.isEditing?t:-1})},changeNum:function(e,t){1===e.number&&-1===t||(e.number+=t,this.sum+=e.price*t)},getRemoveList:function(){var e=[];return this.editingShop.goodsList.forEach(function(t){t.removeChecked&&e.push(t)}),e},removeGoods:function(e,t,o,i){this.removePopup=!0,this.removeData={shop:e,shopIndex:t,item:o,itemIndex:i}},removeConfirm:function(){var e=this;if("你确定要删除该商品吗"===this.removeMsg){var t=this.removeData,o=t.shop,i=t.shopIndex,n=t.item,s=t.itemIndex;d.a.post(f.a.cartRemove,{id:n.id}).then(function(t){n.checked&&(e.sum-=n.number*n.price),o.goodsList.splice(s,1),0===o.goodsList.length&&(e.cartList.splice(i,1),e.removeShop())})}else{var c=[];this.getRemoveList().forEach(function(t){c.push(t.id),t.checked&&(e.sum-=t.number*t.price)}),d.a.post(f.a.cartMremove,{ids:c}).then(function(t){var o=[];e.editingShop.goodsList.forEach(function(e,t){e.removeChecked||o.push(e)}),o.length?e.editingShop.goodsList=o:(e.cartList.splice(e.editingShopIndex,1),e.removeShop())})}this.removePopup=!1},removeShop:function(){this.editingShop=null,this.editingShopIndex=-1,this.removeCheckedAll=!1,this.cartList.forEach(function(e){e.editingMsg="编辑",e.isEditing=!1})},removeMreGoods:function(){this.removePopup=!0,this.removeMsg="确定要删除所选的"+this.getRemoveList().length+"个商品吗"},touchStart:function(e,t){t.startX=e.changedTouches[0].clientX},touchEnd:function(e,t,o,i){o.endX=e.changedTouches[0].clientX;var n="0";o.startX-o.endX>100&&(n="-60px"),o.startX-o.endX<100&&(n="0px"),a()(this.$refs["goods-"+t+"-"+i],{left:n})}},computed:{},mixins:[u.a]})},11:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"bottom-nav"},[o("ul",e._l(e.navConfig,function(t,i){return o("li",{class:{active:i===e.curIndex},on:{click:function(o){e.changePage(t,i)}}},[o("a",[o("i",{class:t.icon}),o("div",[e._v(e._s(t.name))])])])}))])},staticRenderFns:[]}},4:function(e,t,o){function i(e){o(10)}var n=o(6)(o(9),o(11),i,"data-v-e11fb77a",null);e.exports=n.exports},69:function(e,t){},7:function(e,t,o){"use strict";var i=o(4),n=o.n(i),s={filters:{currency:function(e){return e=""+e,-1===e.indexOf(".")?e+".00":e.length===e.indexOf(".")+2?e+"0":e}},components:{foot:n.a}};t.a=s},70:function(e,t){},71:function(e,t){},9:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(12),n=o.n(i),s=n.a.parse(location.search.substr(1)),c=s.index,r=[{name:"有赞",icon:"icon-home",href:"index.html"},{name:"分类",icon:"icon-category",href:"category.html"},{name:"购物车",icon:"icon-cart",href:"cart.html"},{name:"wo",icon:"icon-user",href:"member.html"}];t.default={name:"foot",data:function(){return{navConfig:r,curIndex:parseInt(c)||0}},methods:{changePage:function(e,t){location.href=e.href+"?index="+t}}}}},[107]);
//# sourceMappingURL=cart.676ceceeedae4ee10c35.js.map